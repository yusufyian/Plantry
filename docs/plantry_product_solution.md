# Plantry 产品设计与功能方案（Telegram 场景）

> 目标：让使用 Telegram 群聊沟通的轻量团队，在 **不离开聊天窗口** 的前提下也能获得结构化、可追踪的项目管理体验。

---

## 1. 产品设计目标
| 维度 | 目标描述 |
| --- | --- |
| **零摩擦** | 用户仅需邀请 Bot，即刻捕获任务；无须切换工具或手动抄录。 |
| **AI 驱动** | 通过大模型 + 规则识别对话意图，自动完成任务创建、更新、完成回写。 |
| **成长式体验** | 提供 Seed → Sprout → Blossom → Done 的养成看板，帮助团队「种下想法、见证成长」。 |
| **移动友好** | 所有关键操作都可在 Telegram 内完成，桌面 Web 看板补充可视化和批量管理。 |
| **安全可信** | 端到端加密保障数据安全，支持私有部署满足企业合规需求。 |
| **智能学习** | AI 持续学习团队习惯，逐步提升任务识别准确率和个性化体验。 |

---

## 2. 用户体验蓝图
阶段 | 用户操作 | 系统行为 | 体验感受
--- | --- | --- | ---
**连接** | /link 绑定团队 → 邀请 Bot 入群 | Bot 提示已绑定并展示指令 | "几秒钟就连好了"
**捕获** | "@bob 创建登陆页，周五前完成" | AI 抽取任务候选并入 Inbox | "说完就被记下来"
**确认** | 在 Inbox 勾选确认 | 任务落地看板，Bot 回复确认 | "无需复制粘贴"
**协作** | 拖拽文件、添加标签、@团队讨论 | 自动关联附件，智能分类归档 | "所有信息都在一起"
**跟进** | 拖拽至 Done / 在群里 /done | Bot 在原消息线程回帖 ✅ | "完成进度同步给所有人"
**总结** | 无操作 | 每日 18:00 发送 Digest + 效率报告 | "一张图看懂今天的成果"

---

## 3. 功能设计

### 3.1 Telegram 连接器
- **Bot API**：采用 Long Polling（小团队低成本）及可选 Webhook（后续扩容）。
- **权限最小化**：仅获取 `messages` 权限；媒体文件支持但加密传输。
- **消息过滤**：正则筛选含 *@mention*、日期词或命令前缀 (`/`) 的消息，降低噪音。
- **线程映射**：持久化 `chat_id` + `message_id`，用于后续状态同步。
- **文件附件支持**：自动关联任务相关的文档、图片，支持预览和版本管理。

### 3.2 AI 任务抽取（Task Miner）
步骤 | 技术栈 | 结果字段
--- | --- | ---
预处理 | LangChain split + stop‑word 清洗 | 纯文本
NER | GPT‑4o + function calling | assignee / action / deadline / priority / tags
意图分类 | 零样本 prompt + 规则融合 | create / update / close / dependency
日期解析 | chrono-node（zh‑CN） | ISO 日期
置信度 | soft‑prob → score + 学习反馈 | 0‑1
输出 | taskCandidate → Inbox | JSON

> **准确率目标**：≥ 90%。对 <0.6 置信度的候选标记为「需要人工确认」。  
> **智能学习**：基于用户确认/修正反馈，持续优化团队专用的抽取模型。  
> **智能优先级**：结合截止时间、负责人工作量、历史数据自动建议优先级。

### 3.3 任务确认 Inbox
- **列表视图**：按捕获时间排序；高置信度预勾选。
- **批量操作**：确认、忽略、合并、标签分类。
- **快捷键**：A 全选、E 编辑、Del 忽略、T 添加标签。
- **冲突检测**：同消息多次编辑时弹窗提示合并。
- **离线缓存**：网络不佳时也能查看已同步的任务。

### 3.4 Grow Board（养成看板）
列 | 说明
--- | ---
Seed | 捕获的想法 & 未排期任务
Sprout | 开始执行，进行中
Blossom | 待验收 / PR 待合并
Done | 完成

- **卡片字段**：标题、负责人、截止日期、子任务、评论、标签、附件。
- **交互**：拖拽移动、Quick Edit、Markdown 描述、长按快捷操作。
- **子任务拆解**：支持大任务分解为小任务，建立依赖关系树。
- **标签系统**：项目标签、优先级标签、自定义标签，支持颜色分类。
- **个性化看板**：允许用户自定义列名、排序规则、卡片样式。

### 3.5 Bot 双向指令
命令 | 示例 | 行为
--- | --- | ---
`/assign @bob 登录页 6/30` | 创建任务并指派 | 生成 Seed→Sprout
`/due 1234 7/05` | 更新截止 | 修改卡片
`/done 1234` | 标记完成 | 移至 Done
`/todo` | (无) | Bot 私聊发送个人待办
`/tag 1234 urgent frontend` | 添加标签 | 任务分类归档
`/split 1234` | 拆分任务 | 引导创建子任务

### 3.6 Digest & Reminders
- **日报 Digest**：每天默认 18:00（根据用户时区）在群内以 Markdown 卡片形式推送：
  - 今日新增任务
  - 今日完成任务
  - 即将到期任务
  - 团队效率概览
- **智能提醒**：截止前 24h/@mention 负责人（尊重静默时段 22:00–08:00）。
- **预测性提醒**：基于历史数据预测任务可能延期，提前预警。

### 3.7 数据安全与隐私保护
- **端到端加密**：所有消息和文件传输采用TLS 1.3 + AES-256加密。
- **数据本地化**：支持私有部署，企业数据不出域。
- **访问控制**：细粒度权限管理，操作日志完整记录。
- **合规认证**：支持GDPR、SOC 2等主流合规标准。

### 3.8 团队效率分析
- **效率仪表板**：任务完成率、平均处理时间、瓶颈识别。
- **个人工作报告**：工作模式分析、效率提升建议。
- **趋势预测**：基于历史数据预测项目进度和资源需求。
- **团队协作分析**：沟通频次、协作模式、知识分享等洞察。

---

## 4. 扩展性与集成

### 4.1 第三方集成
- **代码托管**：GitHub、GitLab、Bitbucket 集成，PR 状态同步。
- **项目管理**：Jira、Asana、Trello 双向同步。
- **通讯工具**：飞书、钉钉、Slack 多平台支持。
- **文档协作**：Notion、语雀、Google Docs 链接关联。

### 4.2 开放生态
- **Open API**：RESTful API + GraphQL，支持自定义集成。
- **Webhook 支持**：任务状态变更主动通知外部系统。
- **插件系统**：支持第三方开发者扩展功能模块。
- **数据导出**：支持 CSV、JSON、Excel 等格式的数据导出。

---

## 5. 用户可调参数（高级设置）
- 任务抽取置信度阈值（默认 0.8）。
- Digest 推送时间与模板（Text / Markdown）。
- 静默时段开关与个性化设置。
- **多语言支持**：中文、英文、日文等界面语言切换。
- **通知偏好**：细粒度通知开关，防打扰模式。
- **AI 学习开关**：允许用户控制是否参与模型优化。

---

## 6. 实施路线图

### Phase 1: MVP（3个月）
- 核心AI任务抽取 + 基础看板
- Telegram Bot 基本指令
- 简单的Digest推送

### Phase 2: 增强（6个月）
- 子任务、标签、附件支持
- 效率分析仪表板
- 第一批第三方集成（GitHub）

### Phase 3: 生态（12个月）
- 开放API + 插件系统
- 高级分析与预测
- 企业级安全与合规

---

> **UI**：
🌟 整体设计升级
1. 动态背景
* 整个页面现在有了梦幻般的氛围
* 主要按钮有炫酷的渐变背景和光泽动画
* 次要按钮采用半透明设计
* 悬浮时有缩放和发光效果
5. 卡片升级
* 半透明毛玻璃背景
* 微妙的光泽动画
* 悬浮时有明显的上升和缩放效果
* 更强的阴影效果

7. 标题和图标
* 标题使用渐变文字效果
* 图标有悬浮缩放动画
* 所有文字都有阴影效果
现在整个市场页面都充满了现代感和科技感，与市场概览板块保持了完美的设计统一性！每个元素都有：
* ✨ 光泽动画效果
* 🌈 渐变背景
* 💫 悬浮交互
* 🔮 毛玻璃质感
* 🎯 流畅的动画过渡
这样的设计既炫酷又保持了良好的用户体验！

